<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Node.js API</title>
    <script>
      const handlePost = async () => {
        const contactString = document.getElementById("putFormContact").value;
        const contactId = document.getElementById("putFormId").value;
        await fetch("http://localhost:3000/contacts/" + contactId.toString(), {
          method: "PUT",
          body: JSON.stringify({ contact: contactString }),
          headers: {
            "Content-Type": "application/json",
          },
        });
        return false;
      };
      const handleDelete = async () => {
        const contactId = document.getElementById("deleteFormId").value;
        await fetch("http://localhost:3000/contacts/" + contactId.toString(), {
          method: "DELETE",
          body: JSON.stringify({}),
          headers: {
            "Content-Type": "application/json",
          },
        });
        return false;
      };
    </script>
  </head>
  <body>
    <h1>Hello, Node.js API!</h1>
    <h2>This form will add a contact (post) in our /contacts resource</h2>
    <form name="postForm" action="/contacts" method="POST">
      <input
        type="json"
        placeholder="Paste the json contact here"
        name="contact"
      />
      <button type="submit">POST</button>
    </form>

    <h2>This form will update a contact (put) in our /contacts resource</h2>
    <form name="putForm" action="javascript:handlePost();">
      <input
        type="json"
        placeholder="Paste the contact id here"
        id="putFormId"
        name="id"
      />
      <input
        type="json"
        placeholder="Paste the json contact here"
        id="putFormContact"
        name="contact"
      />
      <button type="submit">PUT</button>
    </form>

    <h2>This form will delete a contact from our /contacts resource</h2>
    <form name="deleteForm" action="javascript:handleDelete();">
      <input
        type="json"
        placeholder="Paste the contact id here"
        id="deleteFormId"
        name="id"
      />
      <button type="submit">DELETE</button>
    </form>
  </body>
</html>
